{"ast":null,"code":"var _jsxFileName = \"/Users/katiemoss/Documents/She_Codes/VS-Codes/CrowdMentor/src/pages/ProjectPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ProjectPage() {\n  _s();\n\n  const token = window.localStorage.getItem(\"token\");\n  const [isLoggedIn, setIsLoggedIn] = useState(token);\n  const history = useHistory();\n  const [projectData, setProjectData] = useState({\n    pledges: []\n  });\n  const {\n    id: project_id\n  } = useParams();\n  const [isEditing, setIsEditing] = useState(false);\n  const [userToken, setuserToken] = useState(token);\n  useEffect(() => {\n    fetch(`${process.env.REACT_APP_API_URL}projects/${project_id}`).then(results => {\n      return results.json();\n    }).then(data => {\n      setProjectData(data);\n    });\n  }, [project_id]);\n\n  const handleChange = e => {\n    const {\n      id,\n      value\n    } = e.target;\n    console.log(\"We are updating the\", id, \" to be: \", value);\n    setProjectData({ ...projectData,\n      [id]: value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const response = await fetch(`\n            ${process.env.REACT_APP_API_URL}projects/${project_id}/`, {\n      method: \"put\",\n      headers: {\n        \"Authorization\": `Token ${localStorage.getItem(`token`)}`,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        title: projectData.title,\n        description: projectData.description,\n        goal: projectData.goal,\n        image: projectData.image,\n        is_open: projectData.is_open,\n        category: projectData.category,\n        location: projectData.location\n      })\n    });\n\n    if (window.localStorage.getItem(\"token\")) {\n      postData().then(response => {\n        if (response.status == 404) {\n          history.push(\"/404\");\n        } else {\n          history.push('/');\n        }\n      });\n    }\n  };\n\n  const deleteProject = async () => {\n    await fetch(`${process.env.REACT_APP_API_URL}projects/${project_id}/`, {\n      method: \"delete\",\n      headers: {\n        \"Authorization\": `Token ${localStorage.getItem('token')}`\n      }\n    });\n    history.push('/');\n  };\n\n  const ReadProject = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"pageframe\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"buttonsummary\",\n        children: isLoggedIn ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"deletebutton\",\n            onClick: deleteProject,\n            children: \"Delete Project\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buttonlink\",\n            onClick: () => setIsEditing(true),\n            children: \"Edit Project\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: projectData.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        children: [\"Created at: \", projectData.date_created]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        children: `Status: ${projectData.is_open}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Category: \", projectData.category]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Location: \", projectData.location]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: projectData.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Pledges (Goal of \", projectData.goal, \" hours):\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: projectData.pledges.map((pledgeData, key) => {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [pledgeData.amount, \" hours (supported by user \", pledgeData.supporter, \"): \", pledgeData.comment]\n          }, key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        className: \"buttonlink\",\n        to: `/createpledge/${project_id}`,\n        children: \"Pledge\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [localStorage.getItem('token') && isEditing === false, /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"pageframe\",\n      children: isEditing ? /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"title\",\n            children: \"Title:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"title\",\n            placeholder: projectData.title,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"description\",\n            children: \"Description:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            type: \"text\",\n            id: \"description\",\n            placeholder: projectData.description,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"Goal\",\n            children: \"Goal:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            id: \"goal\",\n            placeholder: projectData.goal,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"image\",\n            children: \"Image Link:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"url\",\n            id: \"image\",\n            placeholder: projectData.image,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"is_open\",\n            children: \"Open?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"is_open\",\n            placeholder: projectData.is_open,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"category\",\n            children: \"Category:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"category\",\n            placeholder: projectData.category,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"location\",\n            children: \"Location:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"location\",\n            placeholder: projectData.location,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          onClick: handleSubmit,\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsEditing(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(ReadProject, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ProjectPage, \"izn1M9tj6RCk80qxuIujY4yyY/g=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = ProjectPage;\nexport default ProjectPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProjectPage\");","map":{"version":3,"sources":["/Users/katiemoss/Documents/She_Codes/VS-Codes/CrowdMentor/src/pages/ProjectPage.jsx"],"names":["React","useState","useEffect","useParams","useHistory","Link","ProjectPage","token","window","localStorage","getItem","isLoggedIn","setIsLoggedIn","history","projectData","setProjectData","pledges","id","project_id","isEditing","setIsEditing","userToken","setuserToken","fetch","process","env","REACT_APP_API_URL","then","results","json","data","handleChange","e","value","target","console","log","handleSubmit","preventDefault","response","method","headers","body","JSON","stringify","title","description","goal","image","is_open","category","location","postData","status","push","deleteProject","ReadProject","date_created","map","pledgeData","key","amount","supporter","comment"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\n\nfunction ProjectPage() {\n\n    const token = window.localStorage.getItem(\"token\")\n\n    const [isLoggedIn, setIsLoggedIn] = useState(token)\n\n    const history = useHistory()\n\n    const [projectData, setProjectData] = useState({ pledges: [] });\n\n    const { id: project_id } = useParams();\n\n    const [isEditing, setIsEditing] = useState(false);\n    \n    const [userToken, setuserToken] = useState(token)\n\n    useEffect(() => {\n        fetch(`${process.env.REACT_APP_API_URL}projects/${project_id}`)\n        .then((results) => {\n        return results.json();\n        })\n        .then((data) => {\n        setProjectData(data);\n        });\n    }, [ project_id ]);\n\n    const handleChange = (e) => {\n        const { id, value } = e.target\n        console.log(\"We are updating the\", id, \" to be: \", value)\n        setProjectData({\n            ...projectData,\n            [id]: value\n        })\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault()\n        const response = await fetch(`\n            ${process.env.REACT_APP_API_URL}projects/${project_id}/`, {\n                method: \"put\",\n                headers: {\n                    \"Authorization\": `Token ${localStorage.getItem(`token`)}`,\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify({\n                    title: projectData.title,\n                    description: projectData.description,\n                    goal: projectData.goal,\n                    image: projectData.image,\n                    is_open: projectData.is_open,\n                    category: projectData.category,\n                    location: projectData.location\n                }),\n            })\n        if (window.localStorage.getItem(\"token\")) {\n            postData().then((response) => {\n                if (response.status == 404) {\n                history.push(\"/404\")\n                }\n                else {\n                history.push('/');\n                }\n            });\n        }\n    }\n\n    const deleteProject = async () => {\n        await fetch(`${process.env.REACT_APP_API_URL}projects/${project_id}/`, {\n            method: \"delete\",\n            headers: {\n                \"Authorization\": `Token ${localStorage.getItem('token')}`\n            }\n        })\n        history.push('/')\n    }\n\n    const ReadProject = () => {\n        return (\n            <div id=\"pageframe\">\n                <div id=\"buttonsummary\">\n                    { isLoggedIn \n                        ? ( <div>\n                            <button id=\"deletebutton\" onClick={deleteProject}>Delete Project</button>\n                            <button className=\"buttonlink\" onClick={() => setIsEditing(true)}>Edit Project</button>\n                        </div> ) : ( <div>\n                            <Link to=\"/login\">Login</Link>\n                        </div> )\n                    }                    \n                </div>\n                <h2>{projectData.title}</h2>\n                <h6>Created at: {projectData.date_created}</h6>\n                <h6>{`Status: ${projectData.is_open}`}</h6>  \n                <h4>Category: {projectData.category}</h4>\n                <h4>Location: {projectData.location}</h4>                \n                <h5>{projectData.description}</h5>\n                <h3>Pledges (Goal of {projectData.goal} hours):</h3>\n                <ul>\n                    {projectData.pledges.map((pledgeData, key) => {\n                        return (\n                            <li key={key}>\n                            {pledgeData.amount} hours (supported by user {pledgeData.supporter}): {pledgeData.comment}\n                            </li>\n                        );\n                })}\n                </ul>   \n                <Link className=\"buttonlink\" to={`/createpledge/${project_id}`}>Pledge</Link>                   \n            </div>\n        );\n    }\n\n    return (\n        <div>\n        { localStorage.getItem('token')\n            && isEditing === false\n        }\n            <div id=\"pageframe\">\n                {\n                    isEditing\n                    ? (\n                        <form onSubmit={handleSubmit}>\n                            <div>\n                                <label htmlFor=\"title\">Title:</label>\n                                <input\n                                type=\"text\"\n                                id=\"title\"\n                                placeholder= {projectData.title}\n                                onChange={handleChange}\n                                />\n                            </div>\n                            <div>\n                                <label htmlFor=\"description\">Description:</label>\n                                <textarea\n                                type=\"text\"\n                                id=\"description\"\n                                placeholder={projectData.description}\n                                onChange={handleChange}\n                                ></textarea>\n                            </div>\n                            <div>\n                                <label htmlFor=\"Goal\">Goal:</label>\n                                <input\n                                type=\"number\"\n                                id=\"goal\"\n                                placeholder={projectData.goal}\n                                onChange={handleChange}\n                                />\n                            </div>\n                            <div>\n                                <label htmlFor=\"image\">Image Link:</label>\n                                <input\n                                type=\"url\"\n                                id=\"image\"\n                                placeholder={projectData.image}\n                                onChange={handleChange}\n                                />\n                            </div>\n                            <div>\n                                <label htmlFor=\"is_open\">Open?</label>\n                                <input\n                                type=\"text\"\n                                id=\"is_open\"\n                                placeholder={projectData.is_open}\n                                onChange={handleChange}\n                                />\n                            </div>\n                            <div>\n                                <label htmlFor=\"category\">Category:</label>\n                                <input\n                                type=\"text\"\n                                id=\"category\"\n                                placeholder={projectData.category}\n                                onChange={handleChange}\n                                />\n                            </div>\n                            <div>\n                                <label htmlFor=\"location\">Location:</label>\n                                <input\n                                type=\"text\"\n                                id=\"location\"\n                                placeholder={projectData.location}\n                                onChange={handleChange}\n                                />\n                            </div>\n                            <button type=\"submit\" onClick={handleSubmit}>Update</button>\n                            <button onClick={() => setIsEditing(false)}>Cancel</button>\n                        </form>\n                    )\n                    : <ReadProject />\n                }                    \n            </div>\n        </div>\n    );\n}\n\nexport default ProjectPage;"]},"metadata":{},"sourceType":"module"}